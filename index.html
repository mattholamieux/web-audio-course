<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Web Audio</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
    <script src="js/Tone.js"></script>
    <script src="js/p5.js"></script>
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <section data-background="#2727e6" id="home">
                <h3>Welcome to Web Audio!</h3>
                <a href="#/day-one">day one / </a>
                <a href="#/day-two">day two / </a>
                <a href="#/day-three">day three</a>
            </section>

            <section data-background="#2727e6">
                <h2>Intros</h2>
                <p>Share a favorite / memorable audio experience from the past 1-2 weeks</p>
            </section>

            <section data-background="#2727e6">
                <h3>Contact</h3>
                <p>mattbriannelson@gmail.com</p>
                <p>mattholamieux#9634 on discord</p>
                <p>https://github.com/mattholamieux</p>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h2>What you will need</h2>
                    <ul>
                        <li><a href="https://cdnjs.com/libraries/tone">Tone.js Library</a></li>
                        <li><a href="https://p5js.org/download/">P5.js Library</a></li>
                        <li><a href="https://tonejs.github.io/docs/14.7.77/index.html">Tone.js Docs</a></li>
                        <li><a href="https://p5js.org/reference/">P5.js Docs</a></li>
                        <li>The Slides</li>
                        <li>A Code Editor</li>
                    </ul>
                </section>
                <section data-background="#2727e6">
                    <h2><a href="https://editor.p5js.org/mbnelson86/sketches/NH3HpHQQv" target="_blank">Pre-Configured Web IDE</a></h2>
                    <h4>with p5.js and Tone.js</h4>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h2>Some examples of things built with Tone.js</h2>
                    <a href="https://tonejs.github.io/demos" target="_blank">https://tonejs.github.io/demos</a>

                </section>
            </section>

            <section id="day-one" data-background="#2727e6">
                <h2>Web Audio: Day One</h2>
                <h3>Synthesis, Sampling, & Effects</h3>
                <div style="position: absolute; width: 5%; right: 0; top: 300px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(2, 1, 1, 0.375); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                    <a href="#/home">home</a>
                </div>
            </section>

            <section data-background="#2727e6">
                <h2>Learning Objectives</h2>
                <ul>
                    <li>Set up our coding environment for web</li>
                    <li>Describe the basic building blocks of a synthesizer</li>
                    <li>Compare synthesis and sampling</li>
                    <li>Apply effects to our sounds</li>
                </ul>
            </section>

            <section data-background="#2727e6">
                <h2>Coding Concepts</h2>
                <ul>
                    <li>Variables</li>
                    <li>Objects</li>
                    <li>Functions & Methods</li>
                </ul>
            </section>

            <section>
                <section data-background="#2727e6">What we'll be building ⤵</section>
                <section data-background-iframe="https://editor.p5js.org/mbnelson86/full/wYj_osld6" data-background-interactive>
                </section>
            </section>

            <!-- BEGINNING OF INTRO TO SYNTHESIS SECTION -->

            <section>
                <div class="tenor-gif-embed" data-postid="25567014" data-share-method="host" data-aspect-ratio="1.33333" data-width="100%"><a href="https://tenor.com/view/lets-make-some-noise-gif-25567014">Lets Make Some
                        Noise GIF</a>from <a href="https://tenor.com/search/lets+make+some+noise-gifs">Lets Make Some
                        Noise GIFs</a></div>
                <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h2>Hello Tone</h2>
                    <pre data-id="code-animation">
                        <code class="hljs" data-trim data-line-numbers="2|4">
					// Create a new Tone.Synth object and conect the synth to computer's audio output
					const synth = new Tone.Synth().toDestination();
					// Trigger note C4
					synth.triggerAttack("C4");
					</code>
                </pre>
                    <!-- <p>Try it ⤵</p> -->
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/FFhUvDHxz" data-background-interactive>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <div>
                        <div id="confused_dog" class="tenor-gif-embed" data-postid="26290638" data-share-method="host" data-aspect-ratio="1" data-width="30%"><a href="https://tenor.com/view/confused-dog-gif-26290638">Confused Dog Sticker</a>from <a href="https://tenor.com/search/confused+dog-stickers">Confused Dog Stickers</a></div>
                    </div>

                    <img data-src="./assets/audio_context_warning.png">
                </section>

                <section data-background="#2727e6">
                    <img src="./assets/tone_start.png">
                    <p><a href="https://tonejs.github.io/">https://tonejs.github.io/</a></p>
                </section>

                <section data-background="#2727e6">
                    <p>Let's use P5 to add buttons. </p>
                    <ul>
                        <li>We'll use one button to call Tone.start() and trigger the note onset</li>
                        <li>We'll use a second button to trigger the note release</li>
                    </ul>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/liufSYnr1 " data-background-interactive>
                    <div style="position: absolute; width: 50%; right: 0; top: 450px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>We create two <b>global variables</b> on lines 1-2 for our buttons</p>
                        <p>We create the buttons on lines 8-9 using P5's createButton() function</p>
                        <p>On lines 10-11, we add the .mousePressed() method to each button, and pass each one a different function</p>
                        <p>The functions are defined on lines 17-27</p>
                    </div>
                </section>

            </section>

            <section>
                <section data-background="#2727e6">
                    What is a synth?
                </section>
                <section data-background="#2727e6">
                    <div>
                        <img src="./assets/subphatty.png " style="width: 800px ">
                    </div>
                </section>
                <section data-background="#2727e6">
                    <div>
                        <img src=" ./assets/subtractive-synth.jpg " style="width: 80%">
                    </div>
                    <div>
                        <a href="https://blog.landr.com/subtractive-synthesis/" target="_blank">read more about
                            subtractive synthesis</a>
                    </div>

                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Oscillator Types</h3>
                    <img src="https://lumen-app.com/guide/oscillators/images/wave-types.png "></iframe>
                    <div>
                        <a href="https://www.perfectcircuit.com/signal/difference-between-waveforms" target="_blank">learn more about oscillators</a>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/1mf3TRXFf " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left; ">
                        <p>Try changing the oscillator type on line 6</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <h3>Oscillator Types</h3>
                    <p>What do you notice about the different sonic qualities (or timbre) of the oscillators?</p>
                </section>

            </section>

            <section id="Filters ">
                <section data-background="#2727e6">
                    <h3>Filters</h3>
                    <img src="https://www.allaboutcircuits.com/uploads/articles/Types_of_Filters.jpg " style="width: 40% "></iframe>
                    <div>
                        <a href="https://learningsynths.ableton.com/en/filters/filters-in-synthesizers " target="_blank">learn more about filters</a>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <h3>Creating a Tone.Filter</h3>
                    <pre data-id="code-animation ">
                        <code class="hljs " data-trim data-line-numbers="2|4|6">
                    // Create a filter and set cutoff frequency and filter type
                    const filter = new Tone.Filter(500, "lowpass ")
                    // Connect our synth to the filter
                    synth.chain(filter);
                    // Connect the filter to the output
                    filter.toDestination();
                        </code>
                    </pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/Sb0Nj1OGT " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the filter frequency on line 7 from 500 to 2500 to 5000 to 15000 (frequency is the first argument to Tone.Filter)</p>
                        <p>Then try changing the filter type on line 7 to "highpass "</p>
                        <p>Bonus: add a line of code to the draw loop to control the frequency value with the mouseX position
                        </p>
                    </div>
                </section>
            </section>

            <section id="envelope ">
                <section data-background="#2727e6">
                    <h3>Amplitude Envelope</h3>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/ADSR-envelope.svg/640px-ADSR-envelope.svg.png "></iframe>
                    <div>
                        <a href="https://learningsynths.ableton.com/en/envelopes/modulating-amplitude-with-envelopes " target="_blank">learn more about envelopes</a>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <h3>Controlling amplitude in Tone.js</h3>
                    <pre><code data-line-numbers="2-4|6" data-trim>
                        // Set attack, decay, and release values for synth
                        synth.envelope.attack = 0.01;
                        synth.envelope.decay = 0.2;
                        synth.envelope.release = 1;
                        // Trigger the note attack followed by the note release after 0.1 seconds
                        synth.triggerAttackRelease("C4 ", 0.1);
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/RPuNNuvQw" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the attack, decay, and release times on lines 10-12</p>
                        <p>Then try changing the sustain time on line 33 (second argument to triggerAttackRelease)</p>
                        <p>Bonus: add a conditional statement to the draw loop to control release time with right and left arrows</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Defining multiple synth params</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const synth = new Tone.Synth({
                            oscillator: {
                              type: "sawtooth "
                            },
                            envelope: {
                              attack: 1,
                              decay: 0.5,
                              release: 4
                            }
                          });
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/n6J-N6ziB" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>We define our synth object in a separate file to keep things tidy</p>
                    </div>
                </section>
            </section>
            <section>
                <section data-background="#2727e6">
                    <h3>Tone.js includes different synthesis models</h3>
                    <h5>Each has different parameters</h5>
                </section>

                <section data-background="#2727e6">
                    <h3>MonoSynth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-4|5-10|11-15|16-24">
                        const monoSynth = new Tone.MonoSynth({
                            oscillator: {
                              type: "square",
                            },
                            envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.9,
                                release: 1,
                            },
                            filter: {
                              Q: 6,
                              type: lowpass,
                              rolloff: -24,
                            },
                            filterEnvelope: {
                              attack: 0.06,
                              decay: 0.2,
                              sustain: 0.5,
                              release: 2,
                              baseFrequency: 200,
                              octaves: 7,
                              exponent: 2,
                            },
                          });
                        </code></pre>
                </section>

                <section data-background="#2727e6">
                    <h3>FM Synth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-6|7-11|12-13">
                        const fmSynth = new Tone.FMSynth({
                            envelope: {
                                attack: 0.1,
                                decay: 0.5,
                                release: 4,
                              },
                              modulationEnvelope: {
                                attack: 0.3,
                                decay: 0.5,
                                release: 1,
                              }
                            harmonicity: 8,
                            modulationIndex: 10,
                          });                          
                        </code></pre>
                </section>

                <section data-background="#2727e6">
                    <h3>DuoSynth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-25|27-50|52-54">
                        const duoSynth = new Tone.DuoSynth({
                            voice0: {
                              oscillator: {
                                type: "sine",
                              },
                              filter: {
                                Q: 6,
                                type: "lowpass",
                                rolloff: -24,
                              },
                              envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.7,
                                release: 1,
                              },
                              filterEnvelope: {
                                attack: 0.06,
                                decay: 0.2,
                                sustain: 0.5,
                                release: 2,
                                baseFrequency: 1000,
                                octaves: 3,
                                exponent: 2,
                              },
                            },
                            voice1: {
                              oscillator: {
                                type: "sine",
                              },
                              filter: {
                                Q: 6,
                                type: "lowpass",
                                rolloff: -24,
                              },
                              envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.7,
                                release: 1,
                              },
                              filterEnvelope: {
                                attack: 0.06,
                                decay: 0.2,
                                sustain: 0.5,
                                release: 2,
                                baseFrequency: 1000,
                                octaves: 3,
                                exponent: 2,
                              },
                            },
                            vibratoAmount: 0.5,
                            vibratoRate: 5,
                            harmonicity: 1.5,
                          });
                        </code></pre>
                </section>

                <section data-background="#2727e6">
                    <h3>Pluck Synth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const pluckSynth = new Tone.PluckSynth({
                                attackNoise : 1 ,
                                dampening : 4000 ,
                                resonance : 0.7
                          });
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/r6ql3SZAC" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The synths.js file creates four different Tone.Synth objects</p>
                        <p>Re-assign the mySynth variable on line 3 to different synth objects defined in synths.js</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <div style="margin-top: 150px;">
                        <h4>Coding Challenge</h4>
                        <p>How can we trigger the synth using our computer keyboard?</p>
                    </div>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Hint: check out the p5js documentation for <a href="https://p5js.org/reference/#/p5/key">key</a> and <a href="https://p5js.org/reference/#/p5/keyPressed">keyPressed()</a></p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/dASboapd5" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>This is one of many possible approaches</p>
                    </div>
                </section>

            </section>
            <!-- END OF INTRO TO SYNTHESIS SECTION -->

            <!-- BEGINNING OF SAMPLING SECTION-->

            <section>
                <section data-background="#2727e6">
                    <h4>What is a sampler?</h4>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/1a/E-mu_SP-12.svg">
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>a sampler allows music to be made out of any sound recorded by the user, rather than relying on tones generated by oscillators</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Samples are any audio files used as the sound source in a sampler</p>
                    <img src="./assets/samples.png" style="width: 80%">
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Let's change our Tone.Synth to a Tone.Sampler</h3>
                </section>

                <section data-background="#2727e6">
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2-5|6|7-8">
                        const sampler = new Tone.Sampler({
                            urls: {
                                  A1: "A1.mp3",
                                  A2: "A2.mp3",
                              },
                              baseUrl: "https://tonejs.github.io/audio/casio/",
                              attack: 0,
                              release: 1
                          }).toDestination();
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/h2Z3BXEgX" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Notice that we only define audio files for two notes</p>
                        <p>Tone.Sampler automatically repitches the samples, making it is possible to play pitches which were not explicitly included</p>
                        <p>Try changing "casio" in the baseUrl path to "salamander"</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>These audio files are hosted at <a href="https://github.com/Tonejs/audio" target="_blank">https://github.com/Tonejs/audio</a></p>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/AFw7_cKpU" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can also be loaded from local files</p>
                        <p>In this example, audio files are uploaded to a /samples sub-directory</p>
                        <p>Loading local files can take time; include an onload message to indicate when the files have finished loading</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/y5I-_3olG" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can also be unpitched percussion</p>
                        <p>In this example, we don't want to repitch our samples so we provide the exact path to each file and only use those exact note values in our sequence</p>
                        <p>The note values no longer correspond to pitch, but rather as a "key" to each unique sample</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/R1XTDZ2yR" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can be anything!</p>
                        <p>(any audio file that is)</p>
                    </div>
                </section>
            </section>
            <!-- END OF SAMPLING SECTION-->

            <!-- BEGINNING OF FX SECTION -->
            <section>
                <section data-background="#2727e6">
                    <h3>Let's add some effects!</h3>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/66/Pedalboard_%28995939579%29.jpg" style="width: 70%;">
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Tone.js has many built-in effect objects, including delay, reverb, chorus, & distortion</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="9-13|15|17">
                    const sampler = new Tone.Sampler({
                        urls: {
                              A1: "A1.mp3",
                              A2: "A2.mp3",
                          },
                          baseUrl: "https://tonejs.github.io/audio/casio/"
                      })
                      
                      const delay = new Tone.PingPongDelay({
                        delayTime: "16n",
                        feedback: 0.5,
                        wet: 0.5
                      })
                      
                      sampler.chain(delay);
                      
                      delay.toDestination();
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/QwguIIA7V" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the wet value from a float between 0 and 1</p>
                        <p>Wet and Dry refer to how much of the source signal is passed through the effect vs how much is passed through unaffected</p>
                        <p>Now try changing the delay time to other time signature relative values (e.g. "4n", "8n.", or "1m")</p>
                        <p>Finally change the feedback value to a float between 0 and 1. Be careful with higher values!</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>For more info about time values in Tone.js, see <a href="https://github.com/Tonejs/Tone.js/wiki/Time">https://github.com/Tonejs/Tone.js/wiki/Time</a></p>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/UZLLUB6Dr" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The reverb effect can provide a sense of sound in a physical space</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/Zq9ZdEkOd" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Everyone loves distortion!</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <h2>Coding Challenge</h2>
                    <p>Try applying one of the other effects listed at <a href="https://tonejs.github.io/docs/14.7.77/index.html">https://tonejs.github.io/docs/14.7.77/index.html</a></p>
                </section>

                <section data-background="#2727e6">
                    <p>We can chain multiple effects together</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-7|9-13|15-19|20-24|26|28">
                        const sampler = new Tone.Sampler({
                            urls: {
                                  A1: "A1.mp3",
                                  A2: "A2.mp3",
                              },
                              baseUrl: "https://tonejs.github.io/audio/casio/"
                          })
                          
                          const delay = new Tone.PingPongDelay({
                            delayTime: "16n",
                            feedback: 0.5,
                            wet: 0.5
                          })
                          
                          const reverb = new Tone.Reverb({
                            decay: 3,
                            preDelay: 0.1,
                            wet: 0.7
                          })
                          
                          const distortion = new Tone.Distortion({
                            distortion: 5,
                            wet: 1
                          })
                          
                          sampler.chain(distortion, delay, reverb);
                          
                          reverb.toDestination();
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/_WZeRRQSi" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try reversing the order of the effects chain to see how it affects the sound</p>
                        <p>Remember that the final effect in the chain should be connected to the toDestination() method</p>
                    </div>
                </section>
            </section>
            <!-- END OF FX SECTION -->
            <!-- END OF DAY ONE-->

            <!-- BEGINNING OF DAY TWO -->
            <section id="day-two" data-background="#2727e6">
                <h2>Web Audio: Day Two</h2>
                <h3>Sequencing & UI</h3>
                <div style="position: absolute; width: 5%; right: 0; top: 300px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(2, 1, 1, 0.375); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                    <a href="#/home">home</a>
                </div>
            </section>

            <section data-background="#2727e6">
                <h2>Learning Objectives</h2>
                <ul>
                    <li>Sequence musical events</li>
                    <li>Build simple GUIs to control sequences and parameters</li>
                </ul>
            </section>

            <section>
                <section data-background="#2727e6">What we'll be building ⤵</section>
                <section data-background-iframe="https://editor.p5js.org/mbnelson86/full/XAPSjs7qS" data-background-interactive>
                </section>
            </section>

            <!-- BEGIN OF SEQUENCING SECTION -->
            <section>
                <section data-background="#2727e6">Scheduling Events
                    <div>
                        <div class="tenor-gif-embed giff" data-postid="25679088" data-share-method="host" data-aspect-ratio="1" data-width="600px"><a href="https://tenor.com/view/happy-dance-music-art-dancing-gif-25679088 ">Happy Dance GIF</a>from <a href="https://tenor.com/search/happy-gifs ">Happy GIFs</a></div>
                        <script type="text/javascript " async src="https://tenor.com/embed.js "></script>
                    </div>
                </section>
                <section data-background="#2727e6">Starter Code
                    <p>Make a copy of <a href="https://editor.p5js.org/mbnelson86/sketches/4-aM5nx8h" target="_blank"><b><em>this p5js sketch</em></b></a> as your starting point for today</p>

                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Time in Tone.js</h3>
                    <a href="https://github.com/Tonejs/Tone.js/wiki/Time " target="_blank">https://github.com/Tonejs/Tone.js/wiki/Time </a>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/r6ql3SZAC" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Change the sustain length (second argument to triggerAttackRelease on line 21 of sketch.js) to time signature relative values (e.g. "4n", "16n", etc)</p>
                    </div>
                </section>

            </section>

            <section>

                <section data-background="#2727e6">
                    <h3>Tone.Loop</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3|5">
                        const myLoop = new Tone.Loop((time) => {
                            monoSynth.triggerAttackRelease("C4", "16n", time);
                          }, "4n").start(0);

                          Tone.Transport.start();
                        </code></pre>
                </section>
                <section data-background="#2727e6">
                    <h3>BPM</h3>
                    <p>We can change the tempo with Tone.Transport.bpm</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        Tone.Transport.bpm.value = 80;
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/m-ELgsZmX" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Notice that everything in our callback function on lines 6-8 repeats at the rate defined on line 9</p>
                        <p>Try changing the bpm value on line 3</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <h3>Learn more about callback functions</h3>
                    <ul>
                        <li><a href="https://www.freecodecamp.org/news/what-is-a-callback-function-in-javascript/" target="_blank">FreeCodeCamp article</a></li>
                        <li><a href="https://www.freecodecamp.org/news/javascript-callback-functions-what-are-callbacks-in-js-and-how-to-use-them/" target="_blank">Another FreeCodeCamp article</a></li>
                        <li><a href="https://www.freecodecamp.org/news/javascript-callback-functions-what-are-callbacks-in-js-and-how-to-use-them/" target="_blank">Coding Train video</a></li>

                    </ul>

                </section>

                <section data-background="#2727e6">
                    <h3>Playing a Melody</h3>
                    <p>Given the following array of note values, how can we program our loop to play a different note each time?</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        </code></pre>
                </section>

                <section data-background="#2727e6">
                    <h3>Option One</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2|5|6|7|8-10">
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index];
                            monoSynth.triggerAttackRelease(note, "16n", time);
                            index++;
                            if (index > notes.length - 1) {
                                index = 0;
                            }
                        }, "4n").start(0);
                        </code></pre>
                </section>

                <section data-background="#2727e6">
                    <h3>Option Two</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2|5|7">
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index%notes.length];
                            monoSynth.triggerAttackRelease(note, "16n", time);
                            index++;
                        }, "4n").start(0);
                        </code></pre>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Remainder" target="_blank">read more about the modulo operator here</a>
                    </div>

                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/TWwuRsOHV" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Because we used notes.length in our conditional statement on line 13, we can add or remove values from the notes array without any issues</p>
                    </div>
                </section>

                <section data-background="#2727e6" id="fragments">
                    <h3>Rests</h3>
                    <p>How might we add rests (pauses) to our sequence?</p>
                    <pre data-id="code-animation" class="fragment"><code class="hljs " data-trim data-line-numbers="1|6" >
                        const notes = ["C3", "D3", "rest", "G3", "A3", "rest", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index];
                            if (note !== "rest"){
                                monoSynth.triggerAttackRelease(note, "16n", time);
                            }
                            index++;
                            if (index > notes.length - 1) {
                                index = 0;
                            }
                        }, "4n").start(0);
                        </code></pre>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Tone.Pattern</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3|5">
                        const pattern = new Tone.Pattern((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        },["C2", "D4", "E5", "A6"],"upDown").start(0);

                        pattern.interval = "16n";
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/GtvxxvzF-" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the pattern type</p>
                        <p>Options include "up", "down", "upDown", "random"</p>
                        <p>For a full list of pattern names, see https://tonejs.github.io/docs/14.7.39/type/PatternName</p>
                    </div>
                </section>

            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Tone.Sequence</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3">
                        const seq = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["C4", ["E4", "D4"], "G4", ["A4", "G4"]], "4n").start(0);
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/swfLdgoMB" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Subarrays indicate subdivisions of the interval</p>
                        <p>Try changing the order and number of notes in subarrays on line 9</p>
                        <p>What happens with multiple layers of nesting arrays?</p>
                    </div>
                </section>
            </section>


            <section>
                <section data-background="#2727e6">
                    <h3>Playing multiple sequences simultaneously</h3>
                </section>

                <section data-background="#2727e6">
                    <p>We can't trigger the same synth twice at the same time</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-3|5-8|9">
                        const seq1 = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["C4", ["E4", "D4", "E4"], "G4", ["A4", "G4"]], "2n").start(0);
                        
                        const seq2 = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["G3", "G4", "E4", "D3", ["A4", "G4"]], "8n").start(0);

                        Error: Start time must be strictly greater than previous start time
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/jLdUSnbAZ" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>One option is to create two separate synths and trigger each with a different sequence</p>
                        <p>In this example, two synths are defined in synths.js and each sequence triggers a different one</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Another option is to pass our synth as an argument to Tone.PolySynth()</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2-10">
                        const polySynth = new Tone.PolySynth(Tone.Synth, {
                            oscillator: {
                              type: "sawtooth"
                            },
                            envelope: {
                              attack: 0.01,
                              decay: 0.3,
                              sustain: 0.7,
                              release: 2
                            }
                          }).toDestination();
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/FqMT_bemp" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>with Tone.PolySynth() our synth becomes "polyphonic", meaning it can play multiple notes at once</p>
                        <a href="https://www.perfectcircuit.com/signal/synthesizer-polyphony" target="_blank">for more on polyphony, check out https://www.perfectcircuit.com/signal/synthesizer-polyphony</a>
                    </div>
                </section>
            </section>
            <!--END OF SEQUENCING SECTION-->

            <!--BEGINNING OF UI SECTION-->
            <section>
                <section data-background="#2727e6">
                    <h3>Controlling params with UI</h3>
                    <p>Let's use p5.js to control synth parameters in real time</p>
                </section>

                <section data-background="#2727e6">
                    <p>Using p5's mouseX and mouseY variables</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-3">
                        function draw(){
                            delay.wet.value = map(mouseX, 0, width, 0, 1, true);
                            delay.feedback.value = map(mouseY, height, 0, 0, 0.9, true);
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/J_L5QomJf" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>We need to scale the mouseX and mouse Y values to the appropriate range using P5's map() method (lines 25-26)</p>
                        <p>In this example, mouseX and mouseY have a possible range of 0-400 (canvas width and height), while delay.wet and delay.feedback are 0-1</p>
                        <p>read more about p5 map: https://p5js.org/reference/#/p5/map</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Using key presses</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-4|6|9|10|12|13|15">
                        const myDistort = new Tone.Distortion({
                            distortion: 0,
                            wet: 1
                          });

                        let distortionVal = 0;

                        function draw(){
                            if (keyIsDown(UP_ARROW)) {
                                distortionVal += 0.05;
                              }  
                            if (keyIsDown(DOWN_ARROW)) {
                                distortionVal -= 0.05;
                              }
                            myDistort.distortion = distortionVal;
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/4xZIRMdhW" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The nested if-statement on line 29 ensures that the distortion value doesn't go below zero (which would throw an error) </p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Using sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|4-6|10">
                    let slider;

                    function setup(){
                        slider = createSlider(0, 1, 0, 0.01);
                        slider.position(100, 150);
                        slider.style('width', '150px');
                    }

                    function draw(){
                        reverb.wet.value = reverbSlider.value(); 
                    }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/d-Nfz6bn9" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Parameters to createSlider on line 17 are (minimum value, maximum value, initial value, increment amount)</p>
                    </div>
                </section>
            </section>
            <!--END OF UI SECTION-->

            <!--BEGINNING OF SEQUENCER CODE ALONG-->
            <section>
                <section data-background="#2727e6">
                    <h3>Project Code Along</h3>
                    <p>Create a programmable drum machine</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/9/93/Four_to_the_floor_Roland_TR-707.svg">
                </section>

                <section data-background="#2727e6" id="fragments">
                    <h3>Parameters</h3>
                    <ul>
                        <li class="fragment">Should include 6 rows of 12 checkboxes</li>
                        <li class="fragment">Each column represents a step in the sequence and each row represents a different "instrument"</li>
                        <li class="fragment">The sampler is triggered when a checkbox in the current step is checked</li>
                        <li class="fragment">Should include 3 sliders to allow user to change FX parameters</li>
                        <li class="fragment">A fourth slider should allow the user to change the tempo</li>
                    </ul>
                </section>

                <section data-background="#2727e6">
                    <a href="https://editor.p5js.org/mbnelson86/sketches/gbTC3yBdF" target="_blank">Starter Code</a>
                </section>


                <section data-background="#2727e6">
                    <p>Create a row of checkboxes</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="5|15|16|17|18">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        let row = [];
                        
                        function setup() {
                          createCanvas(400, 400);
                          startButton = createButton("start transport");
                          stopButton = createButton("stop transport");
                          startButton.mousePressed(startTransport);
                          stopButton.mousePressed(stopTransport);
                          
                          // Create checkboxes and push to row array
                          for (let i = 0; i < 12; i++) {
                            let cb = createCheckbox();
                            cb.position(i * 20 + 25, 20);
                            row.push(cb);
                          }
                        }   
                    </code></pre>
                </section>

                <section data-background="#2727e6">
                    <p>Create a Tone.Loop to cycle through checkboxes and check if "checked"</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|4|5-7|8|9-11">
                        let index = 0;
                        
                        const loop = new Tone.Loop((time) => {
                            let currentStep = row[index];
                            if (currentStep.checked()) {
                              sampler.triggerAttackRelease(notes[0], "8n", time);
                            }
                            index++;
                            if (index > row.length-1){
                                index = 0;
                            }
                        }, "8n").start(0);
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/Pb57y9nJU" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Visually highlight the current step</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="4-6|8">
                        let step = 0;
                        
                        const loop = new Tone.Loop((time) => {
                            for (let i = 0; i < row.length; i++) {
                                row[i].style("background-color", "gray");
                            }
                            let currentStep = row[index];
                            currentStep.style("background-color", "coral")
                            if (currentStep.checked()) {
                              sampler.triggerAttackRelease(notes[0], "8n", time);
                            }
                            index++;
                            if (index > row.length-1){
                                index = 0;
                            }
                        }, "8n").start(0);
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/MEWO_gYSy" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Create six rows of checkboxes</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="5-7|16|17|18-22|23">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        const rowLength = 12;
                        const numRows = 6;
                        const grid = [];

                        function setup() {
                            createCanvas(300, 400);
                            startButton = createButton("start transport");
                            stopButton = createButton("stop transport");
                            startButton.mousePressed(startTransport);
                            stopButton.mousePressed(stopTransport);

                            for (let j = 0; j < numRows; j++) {
                                let row = [];
                                for (let i = 0; i < rowLength; i++) {
                                    let cb = createCheckbox();
                                    cb.position(i * 20 + 25, j* 20 + 25);
                                    row.push(cb);
                                }
                                grid.push(row);
                            }
                        }
                    </code></pre>
                </section>

                <section data-background="#2727e6">
                    <p>Check if the boxes for the current step are checked <b>in each row</b></p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2|3|4|5|6-8|2-9|10-13">
                        const loop = new Tone.Loop((time) => {
                            for (let i = 0; i < numRows; i++) {
                              let currentRow = grid[i];
                              let currentStep = currentRow[index];
                              let note = notes[grid.indexOf(currentRow)];
                              if (currentStep.checked()) {
                                sampler.triggerAttackRelease(note, "8n", time);
                              }
                            }
                            index++;
                            if (index > rowLength-1) {
                              index = 0;
                            }
                        }, "8n").start(0);
                    </code></pre>
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>and set the note for each row based on its index in the grid array</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/-XtHTv94a" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Highlight current steps</b>
                    </p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="4-6|8">
                        const loop = new Tone.Loop((time) => {
                            for (let i = 0; i < numRows; i++) {
                              let currentRow = grid[i];
                              for (let j = 0; j < rowLength; j++) {
                                currentRow[j].style("background-color", "gray");
                              }
                              let currentStep = currentRow[index];
                              currentStep.style("background-color", "coral");
                              let note = notes[grid.indexOf(currentRow)];
                              if (currentStep.checked()) {
                                sampler.triggerAttackRelease(note, "8n", time);
                              }
                            }
                            index++;
                            if (index > rowLength-1) {
                              index = 0;
                            }
                        }, "8n").start(0);
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/iTmwRsalm" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Create four sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="8|29-34">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        const rowLength = 12;
                        const numRows = 6;
                        const grid = [];
                        const sliders = [];

                        function setup() {
                        createCanvas(300, 400);
                        startButton = createButton("start transport");
                        stopButton = createButton("stop transport");
                        startButton.mousePressed(startTransport);
                        stopButton.mousePressed(stopTransport);

                        // For loop to create 7 rows of checkboxes
                        for (let j = 0; j < numRows; j++) {
                            let row = [];
                            for (let i = 0; i < rowLength; i++) {
                                let cb = createCheckbox();
                                cb.position(i * 20 + 25, j * 20 + 25);
                                cb.style("background-color", "gray");
                                row.push(cb);
                            }
                            grid.push(row);
                        }

                        for (let i = 0; i < 4; i++) {
                            let s = createSlider(0, 1, 0, 0.01);
                            s.position(25, i*30+150);
                            s.style("width", "230px");
                            sliders.push(s);
                        }
                    }
                    </code></pre>
                </section>

                <section data-background="#2727e6">
                    <p>Control FX params with sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="3-5">
                        function draw() {
                            background(220);
                            reverb.wet.value = sliders[0].value();
                            crusher.wet.value = sliders[1].value();
                            delay.wet.value = sliders[2].value();
                          }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/dLmvIOOf1" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(57, 50, 50, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>In this example, the fourth slider is used to control bpm (line 42). Notice that we map the slider value (0-1) to a range appropriate for bpm (60-140)</p>
                        <p>Notice also that we wrap all of the slider value changes in an <code>if (mouseIsPressed)</code> conditional statement to save unecessarily running code when the values haven't changed</p>
                    </div>
                </section>

                <section data-background="#2727e6" id="fragments">
                    <h3>Taking it further</h3>
                    <ul>
                        <li class="fragment">Add a button that clears all checkboxes</li>
                        <li class="fragment">Create a "randomize" button that randomly checks some boxes in the grid</li>
                        <li class="fragment">Create a "reverse" button that plays the sequence backwards</li>
                        <li class="fragment">Add more sliders for further control of FX parameters</li>
                        <li class="fragment">Change the sampler to a synth and map sliders to synth params</li>
                        <li class="fragment">Add additional styling</li>
                    </ul>
                </section>
            </section>
            <!--END OF SEQUENCER CODE ALONG-->
            <!--END OF DAY TWO-->

            <!--BEGINNING OF DAY THREE-->
            <section id="day-three" data-background="#2727e6">
                <h2>Web Audio: Day Three</h2>
                <h3>Visualizing Audio</h3>
                <div style="position: absolute; width: 5%; right: 0; top: 300px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(2, 1, 1, 0.375); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                    <a href="#/home">home</a>
                </div>
            </section>

            <section data-background="#2727e6">
                <h2>Learning Objectives</h2>
                <ul>
                    <li>Stream audio files with Tone.Player</li>
                    <li>Visualize audio using amplitude and frequency data</li>
                    <li>Connect musical events to p5js animations</li>
                </ul>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Streaming Audio</h3>
                </section>

                <section data-background="#2727e6">
                    <p>Tone.Player</p>
                    <pre data-id=" code-animation "><code class="hljs " data-trim data-line-numbers="">
                        const player = new Tone.Player({
                            loop: true,
                            url:  "loop4.mp3",
                            onload: () => {
                              console.log('loaded')
                            }
                          }).toDestination();
                    </code></pre>
                </section>

            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Visualizing Audio</h3>
                </section>

                <section data-background="#2727e6">
                    <p>Visualize Amplitude</p>
                    <pre data-id=" code-animation "><code class="hljs " data-trim data-line-numbers="">
                        const waveform = new Tone.Waveform();
                        player.connect(waveform);

                        function draw(){
                            const values = waveform.getValue();

                            for (let i = 0; i < values.length; i++) {
                                const amplitude = values[i];
                                let w = amplitude * 800;
                                rect(width/2, height/2, w);
                            }
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/uBTRjWZIE" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>visualizing amplitude</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Visualize Frequency</p>
                    <pre data-id=" code-animation "><code class="hljs " data-trim data-line-numbers="">
                        
                        let levels = fft.getValue();
                        for (let i = 1; i< levels.length;i++){
                            let binMapped = map(levels[i], -100, 0, height, 0);
                            stroke(binMapped, binMapped/2, 100);
                            let thisBin = line(i * 25, height, i * 25, binMapped);
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/jhUrbvDvy " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>visualizing frequency</p>
                    </div>
                </section>

                <section data-background="#2727e6">
                    <p>Visualize Pitch</p>
                    <pre data-id=" code-animation "><code class="hljs " data-trim data-line-numbers="1|4|5|11 ">
                        let circleX = 200;
                        const seq = new Tone.Sequence((time, note) => {
                            synth.triggerAttackRelease(note, "16n ", time, random(1));
                            let hertz = Tone.Frequency(note).toFrequency();
                            circleX = map(hertz, 0, 1000, 0, width);
                        }, ["C4 ", ["E4 ", "D4 ", "C3 ", "G5 "], "G4 ", ["A4 ", "G4 "]], "2n ").start(0);

                        function draw() {
                            background(0);
                            fill(255);
                            ellipse(circleX, 100, 20);
                        }
                        </code></pre>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Tone.Frequency() can be used to convert notes (e.g. "C4 ") to frequency values</p>
                        <p>For a note::frequency conversion chart, see https://pages.mtu.edu/~suits/notefreqs.html</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/rdCRwBc4T " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>visualizing pitch</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/yTnV0s3xf " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>In this final example, each circle's x position is determined by the current position of each loop as defined by the "step " variable</p>
                        <p>Each loop references the same notes array, but with different intervals and delay times (e.g. line 30)</p>
                        <p>Only the first loop plays through the entire notes array. Notice, for example, how line 23 uses notes.length-5 as the divisor</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h2>Animation -> Sound</h2>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/AwJQvgfuy" data-background-interactive>
                    <!-- <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(57, 50, 50, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p></p>
                    </div> -->
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/hv_sDqAxMU" data-background-interactive>
                    <!-- <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(57, 50, 50, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p></p>
                    </div> -->
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/w14gmTw9g" data-background-interactive>
                    <!-- <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(57, 50, 50, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p></p>
                    </div> -->
                </section>
            </section>

            <section>
                <section data-background="#2727e6">
                    <h3>Putting it all together</h3>
                </section>

                <section data-background="#2727e6">
                    <h3>Independent work</h3>
                    <p>Create an audio/visual sketch using Tone.js and p5.js</p>
                </section>
            </section>

        </div>
    </div>

    <script src="dist/reveal.js "></script>
    <script src="plugin/notes/notes.js "></script>
    <script src="plugin/markdown/markdown.js "></script>
    <script src="plugin/highlight/highlight.js "></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
        });
    </script>
    <script src="js/sketch.js "></script>
</body>

</html>