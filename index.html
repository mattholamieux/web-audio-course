<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Web Audio</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)">
                <h2>Web Audio</h2>
                <a href="#/day-one">Day One</a>
                </br>
                <a href="#/day-two">Day Two</a>
                </br>
                <a href="#/day-three">Day Three</a>
            </section>

            <section id="day-one" data-background="#265466">
                <h2>Web Audio: Day One</h2>
                <h3>Synthesis and Sequencing</h3>
            </section>

            <section data-background="#265466">
                <h2>Learning Objectives</h2>
                <ul>
                    <li>Describe the basic building blocks of a synthesizer</li>
                    <li>Synthesize and manipulate sounds with code</li>
                    <li>Sequence musical events in the browser</li>
                    <li>Visualize musical events with P5.js</li>
                </ul>
            </section>

            <section data-background="#265466">
                <h2>Agenda</h2>
                <ul>
                    <li>Intros</li>
                    <li>Setting up your environment</li>
                    <li>Fundamentals of digital audio synthesis with Tone.js</li>
                    <li>Sequencing note events with Tone.js</li>
                    <li>Connecting our sequence to p5.js</li>
                    <li>Mini-project #1: polyrhythmic loop</li>
                </ul>
            </section>

            <section>

                <section data-background="#265466">What we'll be building ⤵</section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/qbI-ULG4p" data-background-interactive>
                </section>
            </section>

            <section>
                <section data-background="#265466">
                    <h2>What you will need</h2>
                    <ul>
                        <li><a href="https://cdnjs.com/libraries/tone">Tone.js Library</a></li>
                        <li><a href="https://p5js.org/download/">P5.js Library</a></li>
                        <li><a href="https://tonejs.github.io/docs/14.7.77/index.html">Tone.js Docs</a></li>
                        <li><a href="https://p5js.org/reference/">P5.js Docs</a></li>
                        <li>Slide Deck</li>
                        <li>A Code Editor</li>
                        <li>Headphones</li>
                    </ul>
                </section>
                <section data-background-gradient="linear-gradient(to top, #265466, #30b08e">
                    <h2><a href="https://editor.p5js.org/mbnelson86/sketches/NH3HpHQQv">Pre-Configured Web IDE</a></h2>
                    <h4>with p5.js and Tone.js</h4>
                </section>
            </section>

            <section>
                <div class="tenor-gif-embed" data-postid="25567014" data-share-method="host" data-aspect-ratio="1.33333" data-width="100%"><a href="https://tenor.com/view/lets-make-some-noise-gif-25567014">Lets Make Some
                        Noise GIF</a>from <a href="https://tenor.com/search/lets+make+some+noise-gifs">Lets Make Some
                        Noise GIFs</a></div>
                <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #fafa6e, #9cdf7c)">
                    <h2>Hello Tone</h2>
                    <pre data-id="code-animation">
                        <code class="hljs" data-trim data-line-numbers="2|4">
					// Create a new Tone.Synth object and conect the synth to computer's audio output
					const synth = new Tone.Synth().toDestination();
					// Trigger note C4
					synth.triggerAttack("C4");
					</code>
                </pre>
                    <!-- <p>Try it ⤵</p> -->
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/FFhUvDHxz" data-background-interactive>
                </section>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #fafa6e, #9cdf7c)">
                    <div>
                        <div id="confused_dog" class="tenor-gif-embed" data-postid="26290638" data-share-method="host" data-aspect-ratio="1" data-width="30%"><a href="https://tenor.com/view/confused-dog-gif-26290638">Confused Dog Sticker</a>from <a href="https://tenor.com/search/confused+dog-stickers">Confused Dog Stickers</a></div>
                    </div>

                    <img data-src="./assets/audio_context_warning.png">
                </section>

                <section data-background-gradient="linear-gradient(to top, #fafa6e, #9cdf7c)">
                    <img src="./assets/tone_start.png">
                    <p><a href="https://tonejs.github.io/">https://tonejs.github.io/</a></p>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)">
                    <p>Let's use P5 to add buttons. </p>
                    <ul>
                        <li>We'll use one button to call Tone.start() and trigger the note onset</li>
                        <li>We'll use a second button to trigger the note release</li>
                    </ul>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/liufSYnr1 " data-background-interactive>
                </section>

            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #fa1abe, #9cdf7c) ">
                    What is a synth?
                </section>
                <section data-background-gradient="linear-gradient(to top, #fa1abe, #9cdf7c) ">
                    <div>
                        <img src="./assets/subphatty.png " style="width: 800px ">
                    </div>
                </section>
                <section data-background-gradient="linear-gradient(to top, #fa1abe, #9cdf7c) ">
                    <div>
                        <img src=" ./assets/subtractive-synth.jpg " style="width: 80%">
                    </div>
                    <div>
                        <a href="https://blog.landr.com/subtractive-synthesis/" target="_blank">read more about
                            subtractive synthesis</a>
                    </div>

                </section>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Oscillator Types</h3>
                    <img src="https://lumen-app.com/guide/oscillators/images/wave-types.png "></iframe>
                    <div>
                        <a href="https://learningsynths.ableton.com/en/oscillators/how-synths-make-sound " target="_blank">learn more about oscillators</a>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/1mf3TRXFf " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left; ">
                        <p>Try changing the oscillator type on line 6</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Oscillator Types</h3>
                    <p>What do you notice about the different sonic qualities (or timbre) of the osciallators?</p>
                </section>

            </section>

            <section id="Filters ">
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Filters</h3>
                    <img src="https://www.allaboutcircuits.com/uploads/articles/Types_of_Filters.jpg " style="width: 40% "></iframe>
                    <div>
                        <a href="https://learningsynths.ableton.com/en/filters/filters-in-synthesizers " target="_blank">learn more about filters</a>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Creating a Tone.Filter</h3>
                    <pre data-id="code-animation ">
                        <code class="hljs " data-trim data-line-numbers="2|4|6">
                    // Create a filter and set cutoff frequency and filter type
                    const filter = new Tone.Filter(500, "lowpass ")
                    // Connect our synth to the filter
                    synth.chain(filter);
                    // Connect the filter to the output
                    filter.toDestination();
                        </code>
                    </pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/Sb0Nj1OGT " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the filter frequency on line 15 from 500 to 2500 to 5000 to 15000</p>
                        <p>Then try changing the filter type on line 16 to "highpass "</p>
                        <p>Finally, add a line to the draw loop to control the frequency value with the mouseX position
                        </p>
                    </div>
                </section>
            </section>

            <section id="envelope ">
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Amplitude Envelope</h3>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/ADSR-envelope.svg/640px-ADSR-envelope.svg.png "></iframe>
                    <div>
                        <a href="https://learningsynths.ableton.com/en/envelopes/modulating-amplitude-with-envelopes " target="_blank">learn more about envelopes</a>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Controlling amplitude in Tone.js</h3>
                    <pre><code data-line-numbers="2-4|6" data-trim>
                        // Set attack, decay, and release values for synth
                        synth.envelope.attack.value = 0.01;
                        synth.envelope.decay.value = 0.2;
                        synth.envelope.release.value = 1;
                        // Trigger the note attack followed by the note release after 0.1 seconds
                        synth.triggerAttackRelease("C4 ", 0.1);
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/RPuNNuvQw " data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the attack, decay, and release times on lines 10-12</p>
                        <p>Then try changing the sustain time on line 30</p>
                        <p>Finally, add a conditional statement to the draw loop to control release time with right and left arrows</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Defining multiple synth params</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const synth = new Tone.Synth({
                            oscillator: {
                              type: "sawtooth "
                            },
                            envelope: {
                              attack: 1,
                              decay: 0.5,
                              release: 4
                            }
                          });
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Tone.js includes different synthesis models</h3>
                    <h5>Each has different parameters</h5>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>MonoSynth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-4|5-10|11-15|16-24">
                        const monoSynth = new Tone.MonoSynth({
                            oscillator: {
                              type: "square",
                            },
                            envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.9,
                                release: 1,
                            },
                            filter: {
                              Q: 6,
                              type: lowpass,
                              rolloff: -24,
                            },
                            filterEnvelope: {
                              attack: 0.06,
                              decay: 0.2,
                              sustain: 0.5,
                              release: 2,
                              baseFrequency: 200,
                              octaves: 7,
                              exponent: 2,
                            },
                          });
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>FM Synth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const fmSynth = new Tone.FMSynth({
                            harmonicity: 8,
                            modulationIndex: 10,
                            envelope: {
                              attack: 0.1,
                              decay: 0.5,
                              release: 4,
                            },
                            modulationEnvelope: {
                              attack: 0.3,
                              decay: 0.5,
                              release: 1,
                            }
                          });                          
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>DuoSynth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-25|27-50|52-54">
                        const duoSynth = new Tone.DuoSynth({
                            voice0: {
                              oscillator: {
                                type: "sine",
                              },
                              filter: {
                                Q: 6,
                                type: "lowpass",
                                rolloff: -24,
                              },
                              envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.7,
                                release: 1,
                              },
                              filterEnvelope: {
                                attack: 0.06,
                                decay: 0.2,
                                sustain: 0.5,
                                release: 2,
                                baseFrequency: 1000,
                                octaves: 3,
                                exponent: 2,
                              },
                            },
                            voice1: {
                              oscillator: {
                                type: "sine",
                              },
                              filter: {
                                Q: 6,
                                type: "lowpass",
                                rolloff: -24,
                              },
                              envelope: {
                                attack: 0.005,
                                decay: 0.1,
                                sustain: 0.7,
                                release: 1,
                              },
                              filterEnvelope: {
                                attack: 0.06,
                                decay: 0.2,
                                sustain: 0.5,
                                release: 2,
                                baseFrequency: 1000,
                                octaves: 3,
                                exponent: 2,
                              },
                            },
                            vibratoAmount: 0.5,
                            vibratoRate: 5,
                            harmonicity: 1.5,
                          });
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Pluck Synth</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const pluckSynth = new Tone.PluckSynth({
                                attackNoise : 1 ,
                                dampening : 4000 ,
                                resonance : 0.7
                          });
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/r6ql3SZAC" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The synths.js file creates four different Tone.Synth objects</p>
                        <p>Re-assign the mySynth variable on line 3 to different synth objects defined in synths.js</p>
                    </div>
                </section>

            </section>

            <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)">Scheduling Events
                <div>

                    <div class="tenor-gif-embed giff" data-postid="25679088" data-share-method="host" data-aspect-ratio="1" data-width="600px"><a href="https://tenor.com/view/happy-dance-music-art-dancing-gif-25679088 ">Happy Dance GIF</a>from <a href="https://tenor.com/search/happy-gifs ">Happy GIFs</a></div>
                    <script type="text/javascript " async src="https://tenor.com/embed.js "></script>
                </div>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)">
                    <h3>Time in Tone.js</h3>
                    <a href="https://github.com/Tonejs/Tone.js/wiki/Time " target="_blank">https://github.com/Tonejs/Tone.js/wiki/Time </a>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/r6ql3SZAC" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Change the sustain length (second argument to triggerAttackRelease on line 22 of sketch.js) to time signature relative values (e.g. "4n", "16n", etc)</p>
                    </div>
                </section>

            </section>

            <section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Tone.Loop</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3|5">
                        const myLoop = new Tone.Loop((time) => {
                            monoSynth.triggerAttackRelease("C4", "16n", time);
                          }, "4n").start(0);

                          Tone.Transport.start();
                        </code></pre>
                </section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>BPM</h3>
                    <p>We can change the tempo with Tone.Transport.bpm</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        Tone.Transport.bpm.value = 80;
                        </code></pre>
                </section>
                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/m-ELgsZmX" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Notice that everything on lines 8-10 repeat at the rate defined on line 11</p>
                        <p>Try changing the bpm value on line 5</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Playing a Melody</h3>
                    <p>Given the following array of note values, how can we program our loop to play a different note each time?</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers>
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Option One</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2|5|6|7|8-10">
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index];
                            monoSynth.triggerAttackRelease(note, "16n", time);
                            index++;
                            if (index > notes.length - 1) {
                                index = 0;
                            }
                        }, "4n").start(0);
                        </code></pre>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Option Two</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2|5|7">
                        const notes = ["C3", "D3", "G3", "A3", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index%notes.length];
                            monoSynth.triggerAttackRelease(note, "16n", time);
                            index++;
                        }, "4n").start(0);
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/TWwuRsOHV" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Because we used notes.length in our conditional statement on line 13, we can add or remove values from the notes array without any issues</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)" id="fragments">
                    <h3>Rests</h3>
                    <p>How might we add rests (pauses) to our sequence?</p>
                    <pre data-id="code-animation" class="fragment"><code class="hljs " data-trim data-line-numbers="1|6" >
                        const notes = ["C3", "D3", "rest", "G3", "A3", "rest", "C4", "E4"];
                        let index = 0;

                        const myLoop = new Tone.Loop((time) => {
                            let note = notes[index];
                            if (note !== "rest"){
                                monoSynth.triggerAttackRelease(note, "16n", time);
                            }
                            index++;
                            if (index > notes.length - 1) {
                                index = 0;
                            }
                        }, "4n").start(0);
                        </code></pre>
                </section>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Tone.Pattern</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3|5">
                        const pattern = new Tone.Pattern((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        },["C2", "D4", "E5", "A6"],"upDown").start(0);

                        pattern.interval = "16n";
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/GtvxxvzF-" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the pattern type</p>
                        <p>Options include "up", "down", "upDown", "random"</p>
                        <p>For a full list of pattern names, see https://tonejs.github.io/docs/14.7.39/type/PatternName</p>
                    </div>
                </section>

            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Tone.Sequence</h3>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2|3">
                        const seq = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["C4", ["E4", "D4"], "G4", ["A4", "G4"]], "4n").start(0);
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/swfLdgoMB" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Subarrays indicate subdivisions of the interval</p>
                        <p>Try changing the order and number of notes in subarrays on line 10</p>
                        <p>What happens with multiple layers of nesting arrays?</p>
                    </div>
                </section>
            </section>


            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Playing multiple sequences simultaneously</h3>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <p>We can't trigger the same synth twice at the same time</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-3|5-8|9">
                        const seq1 = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["C4", ["E4", "D4", "E4"], "G4", ["A4", "G4"]], "2n").start(0);
                        
                        const seq2 = new Tone.Sequence((time, note) => {
                            monoSynth.triggerAttackRelease(note, "16n", time);
                        }, ["G3", "G4", "E4", "D3", ["A4", "G4"]], "8n").start(0);

                        Error: Start time must be strictly greater than previous start time
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/jLdUSnbAZ" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>One option is to create two sepearate synths and trigger each with a different sequence</p>
                        <p>In this example, two synths are defined in synths.js and each sequence triggers a different one</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <p>Another option is to pass our synth as an argument to Tone.PolySynth()</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2-10">
                        const polySynth = new Tone.PolySynth(Tone.Synth, {
                            oscillator: {
                              type: "sawtooth"
                            },
                            envelope: {
                              attack: 0.01,
                              decay: 0.3,
                              sustain: 0.7,
                              release: 2
                            }
                          }).toDestination();
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/FqMT_bemp" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>with Tone.PolySynth() our synth becomes "polyphonic", meaning it can play multiple notes at once</p>
                        <p>for more on polyphony, check out https://www.perfectcircuit.com/signal/synthesizer-polyphony</p>
                    </div>
                </section>

            </section>

            <section>
                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <h3>Mini Project #1</h3>
                    <p>Create a polyrhythmic sequence</p>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c)" id="fragments">
                    <h3>Parameters</h3>
                    <ul>
                        <li class="fragment">Should include more than 1 Tone.Loop, Tone.Pattern, or Tone.Sequence</li>
                        <li class="fragment">The result should be polyrhythmic (i.e. combine multiple contrasting rhythms)</li>
                        <li class="fragment">Bonus: Add a visual component to your sequence</li>
                    </ul>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <p>Visualize Amplitude</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-3|7|10-14">
                        // Connect the synth to Tone.Waveform
                        const waveform = new Tone.Waveform();
                        synth.connect(waveform);

                        function draw(){
                            // get amplitude values as array
                            const values = waveform.getValue();

                            // draw a rect for each array value and map width to the value
                            for (let i = 0; i < values.length; i++) {
                                const amplitude = values[i];
                                let w = amplitude * 200;
                                rect(width/2, height/2, w);
                            }
                        }
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/RHKSCuuNr" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>visualizing amplitude</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(to top, #1d6172, #9cdf7c) ">
                    <p>Visualize Pitch</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|4|5|11">
                        let circleX = 200;
                        const seq = new Tone.Sequence((time, note) => {
                            synth.triggerAttackRelease(note, "16n", time, random(1));
                            let hertz = Tone.Frequency(note).toFrequency();
                            circleX = map(hertz, 0, 1000, 0, width);
                        }, ["C4", ["E4", "D4", "C3", "G5"], "G4", ["A4", "G4"]], "2n").start(0);

                        function draw() {
                            background(0);
                            fill(255);
                            ellipse(circleX, 100, 20);
                        }
                        </code></pre>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Tone.Frequency() can be used to convert notes (e.g. "C4") to frequency values</p>
                        <p>For a note::frequency conversion chart, see https://pages.mtu.edu/~suits/notefreqs.html</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/rdCRwBc4T" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>visualizing pitch</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/yTnV0s3xf" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>In this final example, each circle's x position is determined by the current position of each loop as defined by the "step" variable</p>
                        <p>Each loop references the same notes array, but with different intervals and delay times (e.g. line 30)</p>
                        <p>Only the first loop plays through the entire notes array. Notice, for example, how line 23 uses notes.length-5 as the divisor</p>
                    </div>
                </section>
            </section>


            <section id="day-two" data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                <h2>Web Audio: Day Two</h2>
                <h3>Samples, Effects, & UI</h3>
            </section>

            <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                <h2>Learning Objectives</h2>
                <ul>
                    <li>Compare/contrast sampling to synthesis</li>
                    <li>Add effects to our sounds</li>
                    <li>Build simple GUIs to control sequences and parameters</li>

                </ul>
            </section>

            <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                <h2>Agenda</h2>
                <ul>
                    <li>Day One review</li>
                    <li>Fundamentals of sample playback with Tone.js</li>
                    <li>Applying effects to our sound</li>
                    <li>Building simple UIs with p5.touchgui</li>
                    <li>Mini-project #2: step sequencer</li>
                </ul>
            </section>

            <section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">What we'll be building ⤵</section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/GS5yW0DJ_" data-background-interactive>
                </section>
            </section>

            <section>
                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h2>What you will need</h2>
                    <ul>
                        <li><a href="https://cdnjs.com/libraries/tone" target="_blank">Tone.js Library</a></li>
                        <li><a href="https://p5js.org/download/" target="_blank">P5.js Library</a></li>
                        <li><a href="https://tonejs.github.io/docs/14.7.77/index.html" target="_blank">Tone.js Docs</a></li>
                        <li><a href="https://p5js.org/reference/" target="_blank">P5.js Docs</a></li>
                        <li>Slide Deck</li>
                        <li>A Code Editor</li>
                        <li>Headphones</li>
                    </ul>
                </section>
            </section>

            <section>
                <section data-background-gradient="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h4>What is a sampler?</h4>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/1a/E-mu_SP-12.svg">
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>the sampler allows music to be made out of any sound recorded by the user, rather than relying on tones generated by oscillators</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Samples are the audio files used as the sound source</p>
                </section>
            </section>

            <section>
                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h3>Let's change our Tone.Synth to a Tone.Sampler</h3>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|2-5|6">
                        const sampler = new Tone.Sampler({
                            urls: {
                                  A1: "A1.mp3",
                                  A2: "A2.mp3",
                              },
                              baseUrl: "https://tonejs.github.io/audio/casio/"
                          }).toDestination();
                        </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/Rh9GwEvU-" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Notice that we only define audio files for two notes, but our sequence includes other notes not defined in our sampler</p>
                        <p>Tone.Sampler automatically repitches the samples, making it is possible to play pitches which were not explicitly included</p>
                        <p>Try changing "casio" in the baseUrl path to "salamander"</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>These audio files are hosted at <a href="https://github.com/Tonejs/audio" target="_blank">https://github.com/Tonejs/audio</a></p>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/AFw7_cKpU" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can also be loaded from local files</p>
                        <p>In this example, audio files are uploaded to a /samples sub-directory</p>
                        <p>Loading local files can take time; include an onload message to indicate when the files have finished loading</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/y5I-_3olG" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can also be unpitched percussion</p>
                        <p>Because we don't want to repitch our samples, we provide the exact path to each file and only use those exact note values in our sequence</p>
                        <p>The note values no longer correspond to pitch, but rather as a "key" to each unique sample</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/R1XTDZ2yR" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 500px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Samples can be anything!</p>
                        <p>(any audio file that is)</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h3>Let's add some effects!</h3>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/66/Pedalboard_%28995939579%29.jpg" style="width: 70%;">
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Tone.js has many built-in effect objects, including delay, reverb, chorus, & distortion</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="9-13|15|17">
                    const sampler = new Tone.Sampler({
                        urls: {
                              A1: "A1.mp3",
                              A2: "A2.mp3",
                          },
                          baseUrl: "https://tonejs.github.io/audio/casio/"
                      })
                      
                      const delay = new Tone.PingPongDelay({
                        delayTime: "16n",
                        feedback: 0.5,
                        wet: 0.5
                      })
                      
                      sampler.chain(delay);
                      
                      delay.toDestination();
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/PHYNA_u_I" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try changing the wet value from a float between 0 and 1</p>
                        <p>Wet and Dry refer to how much of the source signal is passed through the effect vs how much is passed through unaffected</p>
                        <p>Now try changing the delay time to other time signature relative values (e.g. "4n")</p>
                        <p>Finally change the feedback value to a float between 0 and 1. Be careful with higher values!</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/r2_xfkg54" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The reverb effect can provide a sense of sound in a physical space</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/pJProBpp1" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Everyone loves distortion!</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Try applying one of the other effects listed at <a href="https://tonejs.github.io/docs/14.7.77/index.html">https://tonejs.github.io/docs/14.7.77/index.html</a></p>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>We can chain multiple effects together</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-7|9-13|15-19|20-24|26|28">
                        const sampler = new Tone.Sampler({
                            urls: {
                                  A1: "A1.mp3",
                                  A2: "A2.mp3",
                              },
                              baseUrl: "https://tonejs.github.io/audio/casio/"
                          })
                          
                          const delay = new Tone.PingPongDelay({
                            delayTime: "16n",
                            feedback: 0.5,
                            wet: 0.5
                          })
                          
                          const reverb = new Tone.Reverb({
                            decay: 3,
                            preDelay: 0.1,
                            wet: 0.7
                          })
                          
                          const distortion = new Tone.Distortion({
                            distortion: 5,
                            wet: 1
                          })
                          
                          sampler.chain(distortion, delay, reverb);
                          
                          reverb.toDestination();
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/TV3MdT_gf" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Try reversing the order of the effects chain to see how it affects the sound</p>
                        <p>Remember that the final effect in the chain should be connected to the toDestination() method</p>
                    </div>
                </section>
            </section>

            <section>
                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h3>Controlling params with UI</h3>
                    <p>Let's use p5.js to control synth parameters in real time</p>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Using p5's mouseX and mouseY variables</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="2-3">
                        function draw(){
                            delay.wet.value = map(mouseX, 0, width, 0, 1, true);
                            delay.feedback.value = map(mouseY, height, 0, 0, 0.9, true);
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/J_L5QomJf" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>We need to scale the mouseX and mouse Y values to the appropriate range using P5's map() method</p>
                        <p>In this example, mouseX and mouseY are 0-400 (canvas width and height), while delay.wet and delay.feedback are 0-1</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Using key presses</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1-4|6|9|10|12|13|15">
                        const myDistort = new Tone.Distortion({
                            distortion: 0,
                            wet: 1
                          });

                        let distortionVal = 0;

                        function draw(){
                            if (keyIsDown(UP_ARROW)) {
                                distortionVal += 0.05;
                              }  
                            if (keyIsDown(DOWN_ARROW)) {
                                distortionVal -= 0.05;
                              }
                            myDistort.distortion = distortionVal;
                        }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/4xZIRMdhW" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>The nested if-statement on line 29 ensures that the distortion value doesn't go below zero (which would throw an error) </p>
                    </div>
                </section>



                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Using sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|4-6|10">
                    let slider;

                    function setup(){
                        slider = createSlider(0, 1, 0, 0.01);
                        slider.position(100, 150);
                        slider.style('width', '150px');
                    }

                    function draw(){
                        reverb.wet.value = reverbSlider.value(); 
                    }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/d-Nfz6bn9" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Parameters to createSlider on line 17 are (minimum value, maximum value, initial value, increment amount)</p>
                    </div>
                </section>
            </section>



            <section>
                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h3>Mini Project #2</h3>
                    <p>Create a programmable drum machine</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/9/93/Four_to_the_floor_Roland_TR-707.svg">
                </section>

                <section data-background-gradient="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)" id="fragments">
                    <h3>Parameters</h3>
                    <ul>
                        <li class="fragment">Should include 6 rows of 12 checkboxes</li>
                        <li class="fragment">Each column represents a step in the sequence and each row represents a different "instrument"</li>
                        <li class="fragment">The sampler is triggered when a checkbox in the current step is checked</li>
                        <li class="fragment">Should include 3 sliders to allow user to change FX parameters</li>
                        <li class="fragment">A fourth slider should allow the user to change the tempo</li>
                    </ul>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <a href="https://editor.p5js.org/mbnelson86/sketches/gbTC3yBdF">Starter Code</a>
                </section>


                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Create a row of checkboxes</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="5-6|16|17|18-19|20">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        let row = [];
                        const rowLength = 12;
                        
                        function setup() {
                          createCanvas(400, 400);
                          startButton = createButton("start transport");
                          stopButton = createButton("stop transport");
                          startButton.mousePressed(startTransport);
                          stopButton.mousePressed(stopTransport);
                          
                          // Create checkboxes and push to row array
                          for (let i = 0; i < rowLength; i++) {
                            let cb = createCheckbox();
                            cb.position(i * 20 + 10, 20);
                            cb.style('background-color', 'gray');
                            row.push(cb);
                          }
                        }   
                    </code></pre>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Create a Tone.Loop to cycle through checkboxes and check if "checked"</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="1|4|5|6-8|9">
                        let step = 0;
                        
                        const loop = new Tone.Loop((time) => {
                            let step = index % rowLength;
                            let cb = row[step];
                            if (cb.checked()) {
                              sampler.triggerAttackRelease(notes[0], "8n", time);
                            }
                            index++;
                          }, "8n").start(0);
                    </code></pre>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Visually highlight the current step</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="5-7|9">
                        let step = 0;
                        
                        const loop = new Tone.Loop((time) => {
                            let step = index % rowLength;
                            for (let box of row) {
                                box.style('background-color', 'gray');
                            }
                            let cb = row[step];
                            cb.style('background-color', 'blue');
                            if (cb.checked()) {
                              sampler.triggerAttackRelease(notes[0], "8n", time);
                            }
                            index++;
                          }, "8n").start(0);
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/oTq55hHbB" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Create six rows of checkboxes</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="5-7|16|17|18-23|24">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        const rowLength = 12;
                        const numRows = 6;
                        const grid = [];

                        function setup() {
                            createCanvas(300, 400);
                            startButton = createButton("start transport");
                            stopButton = createButton("stop transport");
                            startButton.mousePressed(startTransport);
                            stopButton.mousePressed(stopTransport);

                            for (let j = 0; j < numRows; j++) {
                                let row = [];
                                for (let i = 0; i < rowLength; i++) {
                                    let cb = createCheckbox();
                                    cb.position(i * 20 + 25, j* 20 + 25);
                                    cb.style("background-color", "gray");
                                    row.push(cb);
                                }
                                grid.push(row);
                            }
                        }
                    </code></pre>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Check if the boxes for the current step are checked <b>in each row</b></p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="4|10">
                        const loop = new Tone.Loop((time) => {
                            let step = index % rowLength;
                            
                            for (let row of grid) {
                                for (let box of row) {
                                    box.style("background-color", "gray");
                                }
                                let cb = row[step];
                                cb.style("background-color", "blue");
                                let note = notes[grid.indexOf(row)];
                                if (cb.checked()) {
                                    sampler.triggerAttackRelease(note, "8n", time);
                                }
                            }

                            index++;
                        }, "8n").start(0);
                    </code></pre>
                    <div style="position: absolute; width: 40%; right: 0; top: 600px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>and set the note for each row based on its index in the grid array</p>
                    </div>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/wQ0xMvf21" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>Start the transport and click the checkboxes to trigger the sampler</p>
                    </div>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Create four sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="8|29-34">
                        let startButton;
                        let stopButton;
                        const notes = ["A1", "B1", "C1", "D1", "E1", "F1"];
                        let index = 0;
                        const rowLength = 12;
                        const numRows = 6;
                        const grid = [];
                        const sliders = [];

                        function setup() {
                        createCanvas(300, 400);
                        startButton = createButton("start transport");
                        stopButton = createButton("stop transport");
                        startButton.mousePressed(startTransport);
                        stopButton.mousePressed(stopTransport);

                        // For loop to create 7 rows of checkboxes
                        for (let j = 0; j < numRows; j++) {
                            let row = [];
                            for (let i = 0; i < rowLength; i++) {
                                let cb = createCheckbox();
                                cb.position(i * 20 + 25, j * 20 + 25);
                                cb.style("background-color", "gray");
                                row.push(cb);
                            }
                            grid.push(row);
                        }

                        for (let i = 0; i < 4; i++) {
                            let s = createSlider(0, 1, 0, 0.01);
                            s.position(25, i*30+150);
                            s.style("width", "230px");
                            sliders.push(s);
                        }
                    }
                    </code></pre>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <p>Control FX params with sliders</p>
                    <pre data-id="code-animation "><code class="hljs " data-trim data-line-numbers="3-5">
                        function draw() {
                            background(220);
                            reverb.wet.value = sliders[0].value();
                            crusher.wet.value = sliders[1].value();
                            delay.wet.value = sliders[2].value();
                          }
                    </code></pre>
                </section>

                <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/dLmvIOOf1" data-background-interactive>
                    <div style="position: absolute; width: 40%; right: 0; top: 400px; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(57, 50, 50, 0.9); color: #fff; padding: 10px; font-size: 14px; text-align: left; ">
                        <p>In this example, the fourth slider is used to control bpm (line 42). Notice that we map the slider value (0-1) to a range appropriate for bpm (60-140)</p>
                        <p>Notice also that we wrap all of the slider value changes in an <code>if (mouseIsPressed)</code> conditional statement to save unecessarily running code when the values haven't changed</p>
                    </div>
                </section>

                <section data-background-gradient="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)" id="fragments">
                    <h3>Taking it further</h3>
                    <ul>
                        <li class="fragment">Add a button that clears all checkboxes</li>
                        <li class="fragment">Create a "randomize" button that randomly checks some boxes in the grid</li>
                        <li class="fragment">Create a "reverse" button that plays the sequence backwards</li>
                        <li class="fragment">Add more sliders for further control of FX parameters</li>
                        <li class="fragment">Change the sampler to a synth and map sliders to synth params</li>
                        <li class="fragment">Add additional styling</li>
                    </ul>
                </section>
            </section>

            <section>

                <section id="day-three" data-background="#664562 ">
                    <h2>Web Audio: Day Three</h2>
                    <h3>Generative Techniques</h3>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h2>Learning Objectives</h2>
                    <ul>
                        <li>Compare/contrast sampling to synthesis</li>
                        <li>Add effects to our sounds</li>
                        <li>Build simple GUIs to control sequences and parameters</li>

                    </ul>
                </section>

                <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                    <h2>Agenda</h2>
                    <ul>
                        <li>Day One review</li>
                        <li>Fundamentals of sample playback with Tone.js</li>
                        <li>Applying effects to our sound</li>
                        <li>Building simple UIs with p5.touchgui</li>
                        <li>Mini-project #2: step sequencer</li>
                    </ul>
                </section>

                <section>

                    <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">What we'll be building ⤵</section>

                    <section data-background-iframe="https://editor.p5js.org/mbnelson86/sketches/GS5yW0DJ_" data-background-interactive>
                    </section>
                </section>

                <section>
                    <section data-background="linear-gradient(90deg, rgba(167,136,41,1) 0%, rgba(180,86,161,1) 100%)">
                        <h2>What you will need</h2>
                        <ul>
                            <li><a href="https://cdnjs.com/libraries/tone" target="_blank">Tone.js Library</a></li>
                            <li><a href="https://p5js.org/download/" target="_blank">P5.js Library</a></li>
                            <li><a href="https://tonejs.github.io/docs/14.7.77/index.html" target="_blank">Tone.js Docs</a></li>
                            <li><a href="https://p5js.org/reference/" target="_blank">P5.js Docs</a></li>
                            <li>Slide Deck</li>
                            <li>A Code Editor</li>
                            <li>Headphones</li>
                        </ul>
                    </section>
                </section>
            </section>

        </div>
    </div>

    <script src="dist/reveal.js "></script>
    <script src="plugin/notes/notes.js "></script>
    <script src="plugin/markdown/markdown.js "></script>
    <script src="plugin/highlight/highlight.js "></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
        });
    </script>
</body>

</html>